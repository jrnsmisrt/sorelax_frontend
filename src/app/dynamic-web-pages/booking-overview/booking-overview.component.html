<div class="container">
  <div class="row">
    <div class="col s12 teal-text"><h3 class="center">My Bookings</h3></div>
  </div>
  <div class="row">
    <div class="col l2 s3">
      <label for="filter_datum">filter op datum</label>
      <input id="filter_datum" class="input-field teal-text" [(ngModel)]="searchDate">
    </div>
    <div class="col l1 s3">
      <label for="filter_status">filter op status</label>
      <select id="filter_status" class="select-dropdown teal-text" [(ngModel)]="searchStatus">
        <option value="">show all</option>
        <option value="confirmed">confirmed</option>
        <option value="cancelled">cancelled</option>
        <option value="pending">pending</option>
      </select>
    </div>
  </div>
  <div class="row center teal lighten-3 white-text center overviewheadrow">
    <div class="col s3"><i class="material-icons">calendar_month</i></div>
    <div class="col s3"><i class="material-icons">schedule</i></div>
    <div class="col s3"><i class="material-icons">spa</i></div>
    <div class="col s3"><i class="material-icons">pending</i></div>
  </div>
  <div *ngFor="let booking of bookings$ | async | filterDate:searchDate | filterStatus:searchStatus">
    <div *ngIf="booking.status!=='DELETED'">
    <a [routerLink]="" (click)="openModal(booking.id, booking.userUid)">
      <div class="row center overviewrow">
        <div class="col s3 overviewcol">{{booking.date}}</div>
        <div class="col s3 overviewcol">{{booking.time}}</div>
        <div class="col s3 overviewcol">{{booking.massage}}</div>
        <div class="col s3 overviewcol">{{booking.status}}</div>
      </div>
    </a></div>
  </div>
</div>


<!-- Modal -->

<div id="cancelModal" class="modal">
  <div class="modal-content">
    <div class="row" *ngIf="booking$|async as booking">
      <div class="row">
        <div class="col s6 overviewheadrow teal white-text">
          Datum
        </div>
        <div class="col overviewrow s6">
          {{booking.date}}
        </div>
      </div>
      <div class="row">
        <div class="col s6 overviewheadrow teal white-text">
          Uur
        </div>
        <div class="col overviewrow s6">
          {{booking.time}}
        </div>
      </div>
      <div class="row">
        <div class="col s6 overviewheadrow teal white-text">
          Duur
        </div>
        <div class="col overviewrow s6">
          {{booking.duration}}
        </div>
      </div>
      <div class="row">
        <div class="col s6 overviewheadrow teal white-text">
          Massage
        </div>
        <div class="col overviewrow s6">
          {{booking.massage}}
        </div>
      </div>
      <div class="row">
        <div class="col s6 overviewheadrow teal white-text">
          Boodschap
        </div>
        <div class="col overviewrow s6">
          {{booking.personalMessage}}
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="row center" *ngIf="booking$|async as booking">
      <div *ngIf="booking.status==='cancelled'">
        <strong>Deze boeking werd al geannuleerd en kan niet ongedaan gemaakt worden</strong><br>
        <small>U dient een nieuwe boeking aan te maken om dezelfde datum en tijdstip te kunnen gebruiken,<br>
          weet dat deze misschien niet langer beschikbaar is...</small>

      </div>
      <div *ngIf="booking.status!=='cancelled'">
        Klik op "Annuleer" Indien u deze boeking wilt annuleren.
        Deze aanvraag is onomkeerbaar, u zult nadien een nieuwe boeking moeten aanvragen.<br>
        <a class="btn-small waves-teal waves-effect modal-close"
           (click)="openConfirmCancelBooking(booking.id)">Annuleer</a>
      </div>

    </div>
  </div>
</div>

<div id="confirmCancelBooking" class="modal">
  <div class="modal-content">
    Ben je z√©ker?
  </div>
  <div class="modal-footer">
    <a class="btn-small waves-teal waves-effect modal-close" *ngIf="booking$|async as booking"
       (click)="cancelBooking(cancelBookingId)">Bevestig Annulatie</a>

  </div>
</div>
